<!--
EVENTMAN (EVN)
-COPYRIGHT NOTICE-
Eventman Copyright (c) 2017 Sean Kee - All Rights Reserved.

Unauthorized copying or reproduction of this file is strictly prohibited.

Visit https://mrskee.github.io/ for more information.
Sean Kee <skee66499@gmail.com>
-->

<!DOCTYPE html>

<html>

<head>
  <!-- Stylesheets -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/css/materialize.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">

  <!-- Scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tablesorter/2.28.15/js/jquery.tablesorter.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.min.js"></script>
  <script type="text/javascript" src="js/SK.js"></script>

  <!-- Favicon -->
  <link rel="apple-touch-icon" sizes="180x180" href="favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicons/favicon-16x16.png">
  <link rel="manifest" href="favicons/manifest.json">
  <link rel="mask-icon" href="favicons/safari-pinned-tab.svg" color="#057aff">
  <meta name="theme-color" content="#ffffff">

  <!-- Page Data -->
  <title>Staff - Hack River Dell Access EVN</title>
</head>

<body>
  <ul id="nav-dropdown" class="uppercase dropdown-content">
    <li class="nav-dropdown-registrants"><a href="registrants.html">Registrants</a></li>
    <li class="nav-dropdown-staff"><a href="#!">Staff</a></li>
    <li class="nav-dropdown-settings"><a href="settings.html">Settings</a></li>
    <li class="divider"></li>
    <li><a class="ButtonLogOut" href="index.html">Logout</a></li>
  </ul>
  <ul id="slide-out" class="uppecase side-nav">
    <li class="nav-dropdown-registrants"><a href="registrants.html">Registrants</a></li>
    <li class="nav-dropdown-staff"><a href="">Staff</a></li>
    <li class="nav-dropdown-settings"><a href="settings.html">Settings</a></li>
    <li class="divider"></li>
    <li><a class="ButtonLogOut" href="index.html">Logout</a></li>
  </ul>
  <div class="navbar-fixed">
    <nav class="nav-extended">
      <div class="container">
        <div class="nav-wrapper">
          <a href="#" class="brand-logo center">Hack River Dell Access</a>
          <a href="#" data-activates="slide-out" class="button-collapse"><i class="material-icons float-left">menu</i><span class="mobile-nav-icon-text">STAFF</span></a>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
            <li class="nav-dropdown-btn"><a class="uppercase dropdown-button waves-effect nav-dropdown-btn" href="#!" data-activates="nav-dropdown">STAFF<i class="material-icons right">arrow_drop_down</i></a></li>
          </ul>
        </div>
      </div>
      <div class="nav-content">
        <ul class="tabs tabs-transparent">
          <div class="tabs-center">
            <li class="tab"><a href="#staff">Staff</a></li>
            <li class="tab logs-tab disabled"><a href="#logs" onclick="EVN_Dash.LoadLogsTab()">Logs</a></li>
            <li class="tab statistics-tab disabled"><a href="#statistics">Statistics</a></li>
            <li class="tab tools-tab disabled"><a href="#tools">Tools</a></li>
          </div>
        </ul>
      </div>
    </nav>
  </div>

  <div id="content">
    <div class="container">
      <div id="loading-bar-wrapper">
        <div id="loading-bar" class="progress">
          <div class="indeterminate"></div>
        </div>
      </div>
    </div>

    <!-- Staff Tab -->
    <div id="staff" class="container" style="display: none;">
      <div id="staff-wrapper" class="top-space">
        <!-- Total Counts -->
        <div class="row">
          <div class="col s3"></div>
          <div id="totals" class="anti-card col s6 center">
            <h4 class="center"> Totals </h4>
            <div class="card-action">
              <h5 class="totals-staff left"> Staff: </h5>
              <h5 class="totals-checked-in right"> Checked In: </h5>
            </div>
            <div class="card-action" style="border-top: none"></div>
          </div>
        </div>

        <div class="divider"></div>

        <div id="staff-list" class="card">
          <div id="staff-list-card" class="card-content" style="padding-left: 50px; padding-right: 50px;">
            <!--h4 class="center"> Staff Hackers </h4-->
            <h4 class="center">
              <span style="padding-top: .75rem;" class="left"><i class="material-icons">verified_user</i>   Eventman Access List</span>
              <input id="SearchField" type="text" class="search-field form-control right" onkeyup="SK.SearchTable('staff-table', [0, 1, 2, 3])"
                placeholder="Search staff..." required="" />
            </h4>
            <table id="staff-table" class="striped">
              <thead>
                <tr>
                  <th id="last_name">Last</th>
                  <th id="first_name">First</th>
                  <th id="type">Account Type</th>
                  <th id="email">Email</th>
                  <th id="phone_number">Phone #</th>
                  <th id="discord_account">Discord</th>
                  <th id="last_seen">Last Seen</th>
                  <th id="status">Status</th>
                  <th></th>
                </tr>
              </thead>

              <tbody id="staff-table-body">
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Profile Modal  -->
    <div id="profile-modal" class="modal modal-fixed-footer">
      <div class="modal-content">
        <h4 style="width: 100%;"><span style="float: left;">Staff Profile</span><span id="profile-flags"></span></h4>
        <p id="profile-content"></p>
        <h5><span style="float: left;">Log </span><a id="clear-log-btn" href="#!" style="float: right" class="red-btn waves-effect waves-green btn-flat right">CLEAR LOG</a>
        </h5>
        <table id="profile-check-in-out-log-table" class="striped ">
          <thead>
            <tr>
              <th id="action">Action</th>
              <th id="timestamp">Timestamp</th>
              <th id="verified_by">Verified By</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="profile-check-in-out-log-table-body">
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-grey btn-flat">Close</a>
      </div>
    </div>

    <!-- Action Log Modal  -->
    <div id="action-log-modal" class="modal modal-fixed-footer">
      <div class="modal-content">
        <h4 style="width: 100%;"><span style="float: left;">Action Log</span><span id="action-log-flags"></span><a id="clear-action-log-btn" href="#!" style="float: right" class="red-btn waves-effect waves-green btn-flat right">CLEAR LOG</a></h4>
        <table id="action-log-table" class="striped ">
          <thead>
            <tr>
              <th id="action">Action</th>
              <th id="id">ID</th>
              <th id="timestamp">Timestamp</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="action-log-table-body">
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-grey btn-flat">Close</a>
      </div>
    </div>

    <!-- Permissions Modal  -->
    <div id="profile-modal" class="modal modal-fixed-footer">
      <div class="modal-content">
        <h4 style="width: 100%;"><span style="float: left;">Registrant Profile</span><span id="profile-flags"></span></h4>
        <p id="profile-content"></p>
        <h5><span style="float: left;">Log </span><a id="clear-log-btn" href="#!" style="float: right" class="red-btn waves-effect waves-green btn-flat right">CLEAR LOG</a>
        </h5>
        <table id="profile-check-in-out-log-table" class="striped ">
          <thead>
            <tr>
              <th id="action">Action</th>
              <th id="timestamp">Timestamp</th>
              <th id="verified_by">Verified By</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="profile-check-in-out-log-table-body">
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-grey btn-flat">Close</a>
      </div>
    </div>

    <!-- Warning Modal -->
    <div id="warning-modal" class="modal">
      <div class="modal-content">
        <h4><i class="material-icons small">warning</i> <span id="warning-modal-title"></span></h4>
        <p>You are about to <span id="warning-modal-span"></span>. Continue?</p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-grey btn-flat ">Cancel</a>
        <a id="warning-modal-confirm" href="#!" class="modal-action modal-close waves-effect waves-green btn-flat "></a>
      </div>
    </div>

    <!-- First Login Modal  -->
    <div id="first-login-modal" class="modal modal-fixed-footer">
      <div class="modal-content">
        <h4>First time logging in?</h4>
        <h5>Glad you could be part of our team! Please take some time to fill out your information.</h5>
        <p class="italics">You can always change this later in your account settings.</p>
        <div id="first-login-content">
          <form id="FirstLoginForm" action="#">
            <div class="row">
              <div class="input-field col s5 left">
                <input id="FirstNameField" type="text" class="form-control" name="first_name" required autofocus="">
                <label for="FirstNameField">First Name</label>
              </div>
              <div class="input-field col s6 right">
                <input id="LastNameField" type="text" class="form-control" name="last_name" required>
                <label for="LastNameField">Last Name</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <input id="EmailField" type="email" class="form-control" name="email" required disabled>
                <label for="Email">Email</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s12">
                <input id="PhoneNumberField" type="tel" class="form-control" name="phone_number" required>
                <label for="PhoneNumberField">Cell Phone Number (No Spaces or Dashes)</label>
              </div>
            </div>
            <div class="row">
              <div class="input-field col s4">
                <select id="SizeField">
                  <option value="" disabled selected>Choose your size</option>
                  <option value="Small">Small</option>
                  <option value="Medium">Medium</option>
                  <option value="Large">Large</option>
                  <option value="Extra Large">Extra Large</option>
                </select>
                <label>T-Shirt Size</label>
              </div>
            </div>
            <div class="row">
                <div class="col s12">
                    <label>What shift(s) can you work?<br><span class="italics">Please select all shifts you can work. Shift times are tentative/subject to change.</span></label>
                  <p>
                      <input type="checkbox" id="ShiftOne"><label for="ShiftOne">Saturday Morning Shift: 7:00 AM-3:00 PM</label>
                  </p>
                  <p>
                      <input type="checkbox" id="ShiftTwo"><label for="ShiftTwo">Saturday Afternoon Shift: 3:00 PM-10:00 PM</label>
                  </p>
                  <p>
                      <input type="checkbox" id="ShiftThree"><label for="ShiftThree">Night Shift: 10:00 PM-7:00 AM</label>
                  </p>
                  <p>
                      <input type="checkbox" id="ShiftFour"><label for="ShiftFour">Sunday Shift: 7:00 AM-4:00 PM</label>
                  </p>
                  </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                  <input id="DiscordAccountField" type="text" class="form-control\" name="discord_account" required>
                  <label for="DiscordAccountField">Discord Account</label>
                  <p class="italics">We use Discord to communicate because it's good. If you have a Discord, drop your tag (example: @DiscordName#1234) above. If you don't have one, sign up at <a href="https://www.google.com/url?q=http://discordapp.com&sa=D&ust=1504364136485000&usg=AFQjCNFBV7Oc3sjAgpJZCYiP7TkctBDjQA">discordapp.com</a>, and then put your Discord tag below. It is imperative that you include your ENTIRE tag.</p>
                </div>
              </div>
              <!--div class="divider"></div>
            <div class="row top-space">
              <div class="input-field col s5 left">
                <input id="NewPasswordField" type="password" class="form-control" name="password" placeholder="New Password" required>
                <label for="NewPasswordField">New Password</label>
              </div>
              <div class="input-field col s6 right">
                <input id="ConfirmNewPasswordField" type="password" class="form-control" name="password" placeholder="Confirm Password" required>
                <label for="ConfirmNewPassword">Confirm Password</label>
              </div>
            </div-->
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action waves-effect waves-green btn-flat" id="first-login-submit">Complete</a>
      </div>
    </div>

    <!-- Logs Tab -->
    <div id="logs" class="" style="display: none;">
        <div id="logs-tabs" class="secondary-tabs">
                <ul class="tabs-fixed-width tabs-transparent tabs">
                  <li class="tab col s3"><a class="active" href="#check-in-out-logs-list">History</a></li>
                  <li class="tab col s3"><a id="action-logs-list-tab" class="disabled" href="#action-logs-list">Action Log</a></li>
                </ul>
            </div>
      <div id="logs-wrapper" class="container top-space">

        <div id="check-in-out-logs-list" class="card">
          <div id="check-in-out-logs-list-card" class="card-content" style="padding-left: 50px; padding-right: 50px;">
            <h4 class="center">
              <span style="padding-top: .75rem;" class="left">Staff History</span>
              <input id="SearchFieldTwo" type="text" class="search-field form-control right" onkeyup="SK.SearchTable('check-in-out-logs-table', [0, 1, 3])"
                placeholder="Search log..." required="" />
            </h4>
            <table id="check-in-out-logs-table" class="striped">
              <thead>
                <tr>
                  <th id="check-in-out-logs-action">Action</th>
                  <th id="check-in-out-logs-id">ID</th>
                  <th id="check-in-out-logs-timestamp">Timestamp</th>
                  <th id="check-in-out-logs-verified_by">Verified By</th>
                  <th></th>
                </tr>
              </thead>

              <tbody id="check-in-out-logs-table-body">
              </tbody>
            </table>
          </div>
        </div>
        <div id="action-logs-list" class="card">
            <div id="action-logs-list-card" class="card-content" style="padding-left: 50px; padding-right: 50px;">
              <h4 class="center">
                <span style="padding-top: .75rem;" class="left">Staff Actions Log</span>
                <input id="SearchFieldThree" type="text" class="search-field form-control right" onkeyup="SK.SearchTable('action-logs-table', [0, 1, 3])"
                  placeholder="Search log..." required="" />
              </h4>
              <table id="action-logs-table" class="striped">
                <thead>
                  <tr>
                    <th id="action-logs-action">Action</th>
                    <th id="action-logs-id">ID</th>
                    <th id="action-logs-timestamp">Timestamp</th>
                    <th id="action-logs-verified_by">Verified By</th>
                    <th></th>
                  </tr>
                </thead>
  
                <tbody id="action-logs-table-body">
                </tbody>
              </table>
            </div>
          </div>
      </div>
    </div>

    <!-- Statistics Tab -->
    <div id="statistics" class="top-space container" style="display: none;">
      <div id="stats-wrapper" class="">
        <!-- Total Counts -->
        <div class="row">
          <div class="col s3"></div>
          <div id="totals" class="anti-card col s6 center">
            <h4 class="center"> Totals </h4>
            <div class="card-action">
              <h5 class="totals-staff left"> staff: </h5>
              <h5 class="totals-checked-in right"> Checked In: </h5>
            </div>
            <div class="card-action" style="border-top: none"></div>
          </div>
        </div>

        <div class="divider"></div>
        <!-- Shirt Sizes -->
        <div class="row">
          <div id="shirt-sizes" class="card col s4">
            <div id="shirt-sizes-card" class="card-content">
              <h5 class="center"> Shirt Sizes </h5>
              <table id="shirt-sizes-table" class="striped ">
                <thead>
                  <tr>
                    <th id="size">Size</th>
                    <th id="size-count">Count</th>
                  </tr>
                </thead>
                <tbody id="shirt-sizes-table-body">
                </tbody>
              </table>
            </div>
          </div>
          <div class="col s1"></div>
          <div id="shirt-sizes-chart" class="card col s7">
            <div id="shirt-sizes-chart-card" class="card-content" style="padding-left: 35px; padding-right: 35px;">
              <canvas id="shirt-sizes-chart-canvas" width="100%" height="100%"></canvas>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Dietary Restrictions-->
        <div class="row">
          <div id="dietary-restrictions" class="card col s4">
            <div id="dietary-restrictions-card" class="card-content">
              <h5 class="center"> Dietary Restrictions </h5>
              <table id="dietary-restrictions-chart" class="striped ">
                <thead>
                  <tr>
                    <th id="type">Type</th>
                    <th id="type-count">Count</th>
                  </tr>
                </thead>
                <tbody id="dietary-restrictions-table-body">
                </tbody>
              </table>
            </div>
          </div>
          <div class="col s1">
          </div>
          <div id="dietary-restrictions-chart" class="card col s7">
            <div id="dietary-restrictions-card" class="card-content" style="padding-left: 35px; padding-right: 35px;">
              <canvas id="dietary-restrictions-chart-canvas" width="100%" height="100%"></canvas>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <!-- Schools Restrictions-->
        <div class="row">
          <div id="schools" class="card col s12">
            <div id="schools-card" class="card-content">
              <h5 class="center"> Schools </h5>
              <table id="schools-table" class="striped ">
                <thead>
                  <tr>
                    <th id="school-name">School</th>
                    <th id="school-count-count">Count</th>
                  </tr>
                </thead>
                <tbody id="schools-table-body">
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="row">
          <div id="schools-chart" class="card col s12">
            <div id="schools-chart-card" class="card-content" style="padding-left: 35px; padding-right: 35px;">
              <canvas id="schools-chart-canvas" width="100%" height="100%"></canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tools Tab -->
    <div id="tools" class="container tools-tab top-space" style="display: none;">
      <div id="tools-wrapper" class="">

        <div class="row">
          <div class="col s3"></div>
          <div id="download-staff" class="card col s6 center">
            <div id="download-staff-card" class="card-content">
              <h4 class="center">Export Staff</h4>
              <p class="center italics">*Does not include banned staff</p>
              <div class="card-action" style="border-top: none">
                <a id="download-csv-button" class="waves-effect waves-light btn" onclick="EVN_Dash.ExportStaff('CSV')"><i class="material-icons" style="float: left;">file_download</i>  CSV</a>
                <a id="download-csv-button" class="waves-effect waves-light btn" onclick="EVN_Dash.ExportStaff('JSON')"><i class="material-icons" style="float: left;">file_download</i>  JSON</a>
              </div>
            </div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="row row-no-margin">
          <div class="col s2"></div>
          <div id="raffle" class="anti-card col s8">
            <h4 class="center"> Raffle </h4>
            <div class="center">
              <a id="raffle-create-new-button" class="waves-effect waves-light btn" onclick="Materialize.toast('Sorry, this feature is not available yet', 4000, 'toast-fix')"><i class="material-icons" style="float: left;">add</i> CREATE NEW</a>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col s2"></div>
          <div id="raffle" class="card col s8 hide">
            <div id="raffle-card" class="card-content">
              <h4 class="center"> Raffle
                <div class="right">
                  <a class="waves-effect waves-light btn" style="display: none;">CREATE NEW</a>
                </div>
              </h4>
              <table id="raffle-table" class="striped " style="display: none;">
                <thead>
                  <tr>
                    <td>#</td>
                    <td>ID</td>
                    <td>Last</td>
                    <td>First</td>
                    <td></td>
                  </tr>
                </thead>
                <tbody id="raffle-table-body">
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>
  <script src="js/EVN_AuthenticationService.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.1/js/materialize.min.js"></script>
  <script src="js/EVN_User.js"></script>
  <script src="js/EVN_Staff.js"></script>
  <script>
    $(document).ready(function () {
      $('.modal').modal();
      $('.button-collapse').sideNav({
        menuWidth: 500, // Default is 300
        edge: 'left', // Choose the horizontal origin
        closeOnClick: true, // Closes side-nav on <a> clicks, useful for Angular/Meteor
        draggable: true, // Choose whether you can drag to open on touch screens,
        onOpen: function (el) { /* Do Stuff */ }, // A function to be called when sideNav is opened
        onClose: function (el) { /* Do Stuff */ }, // A function to be called when sideNav is closed
      });
      $('.collapsible').collapsible();
      $('select').material_select();
    });

    var EVN_Dash = new EVN_Staff();
    AUTH.onAuthStateChanged(firebaseUser => {
      if (firebaseUser) {
          EVN_Dash.Load();
      } else {
        IsFailure();
      }
    })
  </script>
</body>

</html>